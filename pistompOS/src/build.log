++++ realpath -s /home/debian/pistompOS/src/build
+++ dirname /home/debian/pistompOS/src/build
++ BUILD_SCRIPT_PATH=/home/debian/pistompOS/src
++ source /home/debian/pistompOS/src/common.sh
++ install_cleanup_trap
++ set -e
++ trap cleanup SIGINT SIGTERM
++++ realpath -s /home/debian/pistompOS/src/build
+++ dirname /home/debian/pistompOS/src/build
++ CUSTOM_OS_PATH=/home/debian/pistompOS/src
++ source /home/debian/pistompOS/src/config
+++++ realpath -s /home/debian/pistompOS/src/config
++++ dirname /home/debian/pistompOS/src/config
+++ CONFIG_DIR=/home/debian/pistompOS/src
+++ WORKSPACE_POSTFIX=
+++ export BUILD_VARIANT=
+++ BUILD_VARIANT=
+++ BUILD_VARIANT=
+++ : default
+++ export BUILD_FLAVOR=
+++ BUILD_FLAVOR=
+++ : default
+++ echo -e '--> Building VARIANT default, FLAVOR default'
--> Building VARIANT default, FLAVOR default
+++ '[' -f /home/debian/pistompOS/src/config.local ']'
+++ source /home/debian/pistompOS/pistompOS/src/config
++++ export DIST_NAME=pistompOS
++++ DIST_NAME=pistompOS
++++ export DIST_VERSION=2.2.0
++++ DIST_VERSION=2.2.0
++++ export RPI_IMAGER_NAME=pistompOS
++++ RPI_IMAGER_NAME=pistompOS
++++ export 'RPI_IMAGER_DESCRIPTION=A raspberrypi distro built with CustomPiOS'
++++ RPI_IMAGER_DESCRIPTION='A raspberrypi distro built with CustomPiOS'
++++ export RPI_IMAGER_WEBSITE=https://github.com/micahvdm/pistompOS
++++ RPI_IMAGER_WEBSITE=https://github.com/micahvdm/pistompOS
++++ export RPI_IMAGER_ICON=https://raw.githubusercontent.com/guysoft/CustomPiOS/devel/media/rpi-imager-CustomPiOS.png
++++ RPI_IMAGER_ICON=https://raw.githubusercontent.com/guysoft/CustomPiOS/devel/media/rpi-imager-CustomPiOS.png
++++ export 'MODULES=base,network,req_preinstall,lilv,auto-mount-removable(mod,mod_ttymidi,audio,pistomp,services,sys),kernel'
++++ MODULES='base,network,req_preinstall,lilv,auto-mount-removable(mod,mod_ttymidi,audio,pistomp,services,sys),kernel'
+++ '[' default '!=' default ']'
+++ echo Import the variant config if we have one
Import the variant config if we have one
+++ '[' -n '' ']'
+++ '[' -n '' ']'
+++ '[' -f /home/debian/pistompOS/pistompOS/src/config.local ']'
+++ TMP='base,network,req_preinstall,lilv,auto-mount-removable,mod,mod_ttymidi,audio,pistomp,services,sys),kernel'
+++ TMP='base,network,req_preinstall,lilv,auto-mount-removable,mod,mod_ttymidi,audio,pistomp,services,sys),kernel'
+++ MODULES_LIST=base,network,req_preinstall,lilv,auto-mount-removable,mod,mod_ttymidi,audio,pistomp,services,sys,,kernel
++++ echo base,network,req_preinstall,lilv,auto-mount-removable,mod,mod_ttymidi,audio,pistomp,services,sys,,kernel
++++ tr , '\n'
+++ for module in $(echo "${MODULES_LIST}" | tr "," "\n")
+++ '[' -d /home/debian/pistompOS/pistompOS/src/modules/base ']'
+++ export MODULE_PATH=/home/debian/pistompOS/pistompOS/src/modules/base
+++ MODULE_PATH=/home/debian/pistompOS/pistompOS/src/modules/base
+++ echo 'loading base config at /home/debian/pistompOS/pistompOS/src/modules/base/config'
loading base config at /home/debian/pistompOS/pistompOS/src/modules/base/config
+++ '[' -f /home/debian/pistompOS/pistompOS/src/modules/base/config ']'
+++ source /home/debian/pistompOS/pistompOS/src/modules/base/config
++++ BASE_VERSION=2.2.0
++++ '[' -n '' ']'
++++ BASE_PRESCRIPT=
++++ '[' -n '' ']'
++++ BASE_POSTSCRIPT=
++++ '[' -n '' ']'
++++ BASE_IMAGE_PATH=/home/debian/pistompOS/pistompOS/src/image
++++ '[' -n '' ']'
++++ BASE_IMAGE_RASPBIAN=yes
++++ '[' -n '' ']'
++++ BASE_DISTRO=raspbian
++++ '[' raspbian = ubuntu ']'
++++ '[' raspbian = raspios64 ']'
++++ '[' -n '' ']'
+++++ head -n 1
+++++ ls -t '/home/debian/pistompOS/pistompOS/src/image/*-raspbian*.zip' '/home/debian/pistompOS/pistompOS/src/image/*-raspbian*.7z' '/home/debian/pistompOS/pistompOS/src/image/*-raspbian*.xz' '/home/debian/pistompOS/pistompOS/src/image/*-raspios*.zip' '/home/debian/pistompOS/pistompOS/src/image/*-raspios*.7z' /home/debian/pistompOS/pistompOS/src/image/2024-03-12-raspios-bullseye-arm64-lite.img.xz
ls: cannot access '/home/debian/pistompOS/pistompOS/src/image/*-raspbian*.zip': No such file or directory
ls: cannot access '/home/debian/pistompOS/pistompOS/src/image/*-raspbian*.7z': No such file or directory
ls: cannot access '/home/debian/pistompOS/pistompOS/src/image/*-raspbian*.xz': No such file or directory
ls: cannot access '/home/debian/pistompOS/pistompOS/src/image/*-raspios*.zip': No such file or directory
ls: cannot access '/home/debian/pistompOS/pistompOS/src/image/*-raspios*.7z': No such file or directory
++++ BASE_ZIP_IMG=/home/debian/pistompOS/pistompOS/src/image/2024-03-12-raspios-bullseye-arm64-lite.img.xz
++++ '[' -n '' ']'
++++ BASE_USER=pistomp
++++ '[' -n '' ']'
++++ BASE_ADD_USER=yes
++++ '[' -n '' ']'
++++ BASE_USER_PASSWORD=pistomp
++++ '[' -n '' ']'
++++ BASE_RELEASE_COMPRESS=yes
++++ '[' -n '' ']'
++++ BASE_RELEASE_IMG_NAME=default
++++ '[' -n '' ']'
++++ BASE_RELEASE_ZIP_NAME=default
++++ '[' -n '' ']'
++++ BASE_WORKSPACE=/home/debian/pistompOS/pistompOS/src/workspace
++++ '[' -n '' ']'
++++ BASE_MOUNT_PATH=/home/debian/pistompOS/pistompOS/src/workspace/mount
++++ '[' -n '' ']'
++++ BASE_BOOT_MOUNT_PATH=boot
++++ '[' -n '' ']'
++++ BASE_ROOT_PARTITION=2
++++ '[' -n '' ']'
++++ BASE_IMAGE_ENLARGEROOT=200
++++ '[' -n '' ']'
++++ BASE_IMAGE_RESIZEROOT=200
++++ '[' -n '' ']'
++++ BASE_APT_CACHE=/home/debian/pistompOS/pistompOS/src/workspace/aptcache
++++ '[' -n '' ']'
++++ BASE_APT_PROXY=
++++ '[' -n '' ']'
++++ BASE_APT_MIRROR=
++++ '[' -n '' ']'
++++ BASE_PYPI_INDEX=
++++ '[' -n '' ']'
++++ BASE_OVERRIDE_HOSTNAME=pistomp
++++ '[' -n '' ']'
++++ BASE_BUILD_REPO_MIRROR=
++++ '[' -n '' ']'
++++ BASE_SSH_ENABLE=yes
++++ '[' -n '' ']'
+++++ git -C /home/debian/pistompOS/src rev-parse HEAD
++++ BASE_COMMIT=b466bc99ee60fa7e9664da8a2266d990deace5cc
++++ '[' -n '' ']'
++++ BASE_CONFIG_MEMSPLIT=default
++++ '[' -n '' ']'
++++ BASE_CONFIG_TIMEZONE=default
++++ '[' -n '' ']'
++++ BASE_CONFIG_LOCALE=default
++++ '[' -n '' ']'
++++ BASE_CONFIG_KEYBOARD=default
++++ '[' -n '' ']'
++++ BASE_ARCH=arm64
++++ '[' -n '' ']'
++++ BASE_IGNORE_VARIANT_NAME=no
++++ '[' -n '' ']'
++++ BASE_ENABLE_UART=no
++++ : yes
+++ echo ================================================================
================================================================
+++ echo 'Using the following config:'
Using the following config:
+++ module_up=BASE
+++ module_up=BASE_
+++ IFS=
+++ read -r var
++++ compgen -A variable BASE_
+++ export BASE_ADD_USER
+++ echo BASE_ADD_USER
BASE_ADD_USER
+++ IFS=
+++ read -r var
+++ export BASE_APT_CACHE
+++ echo BASE_APT_CACHE
BASE_APT_CACHE
+++ IFS=
+++ read -r var
+++ export BASE_APT_CLEAN
+++ echo BASE_APT_CLEAN
BASE_APT_CLEAN
+++ IFS=
+++ read -r var
+++ export BASE_APT_MIRROR
+++ echo BASE_APT_MIRROR
BASE_APT_MIRROR
+++ IFS=
+++ read -r var
+++ export BASE_APT_PROXY
+++ echo BASE_APT_PROXY
BASE_APT_PROXY
+++ IFS=
+++ read -r var
+++ export BASE_ARCH
+++ echo BASE_ARCH
BASE_ARCH
+++ IFS=
+++ read -r var
+++ export BASE_BOOT_MOUNT_PATH
+++ echo BASE_BOOT_MOUNT_PATH
BASE_BOOT_MOUNT_PATH
+++ IFS=
+++ read -r var
+++ export BASE_BUILD_REPO_MIRROR
+++ echo BASE_BUILD_REPO_MIRROR
BASE_BUILD_REPO_MIRROR
+++ IFS=
+++ read -r var
+++ export BASE_COMMIT
+++ echo BASE_COMMIT
BASE_COMMIT
+++ IFS=
+++ read -r var
+++ export BASE_CONFIG_KEYBOARD
+++ echo BASE_CONFIG_KEYBOARD
BASE_CONFIG_KEYBOARD
+++ IFS=
+++ read -r var
+++ export BASE_CONFIG_LOCALE
+++ echo BASE_CONFIG_LOCALE
BASE_CONFIG_LOCALE
+++ IFS=
+++ read -r var
+++ export BASE_CONFIG_MEMSPLIT
+++ echo BASE_CONFIG_MEMSPLIT
BASE_CONFIG_MEMSPLIT
+++ IFS=
+++ read -r var
+++ export BASE_CONFIG_TIMEZONE
+++ echo BASE_CONFIG_TIMEZONE
BASE_CONFIG_TIMEZONE
+++ IFS=
+++ read -r var
+++ export BASE_DISTRO
+++ echo BASE_DISTRO
BASE_DISTRO
+++ IFS=
+++ read -r var
+++ export BASE_ENABLE_UART
+++ echo BASE_ENABLE_UART
BASE_ENABLE_UART
+++ IFS=
+++ read -r var
+++ export BASE_IGNORE_VARIANT_NAME
+++ echo BASE_IGNORE_VARIANT_NAME
BASE_IGNORE_VARIANT_NAME
+++ IFS=
+++ read -r var
+++ export BASE_IMAGE_ENLARGEROOT
+++ echo BASE_IMAGE_ENLARGEROOT
BASE_IMAGE_ENLARGEROOT
+++ IFS=
+++ read -r var
+++ export BASE_IMAGE_PATH
+++ echo BASE_IMAGE_PATH
BASE_IMAGE_PATH
+++ IFS=
+++ read -r var
+++ export BASE_IMAGE_RASPBIAN
+++ echo BASE_IMAGE_RASPBIAN
BASE_IMAGE_RASPBIAN
+++ IFS=
+++ read -r var
+++ export BASE_IMAGE_RESIZEROOT
+++ echo BASE_IMAGE_RESIZEROOT
BASE_IMAGE_RESIZEROOT
+++ IFS=
+++ read -r var
+++ export BASE_MOUNT_PATH
+++ echo BASE_MOUNT_PATH
BASE_MOUNT_PATH
+++ IFS=
+++ read -r var
+++ export BASE_OVERRIDE_HOSTNAME
+++ echo BASE_OVERRIDE_HOSTNAME
BASE_OVERRIDE_HOSTNAME
+++ IFS=
+++ read -r var
+++ export BASE_POSTSCRIPT
+++ echo BASE_POSTSCRIPT
BASE_POSTSCRIPT
+++ IFS=
+++ read -r var
+++ export BASE_PRESCRIPT
+++ echo BASE_PRESCRIPT
BASE_PRESCRIPT
+++ IFS=
+++ read -r var
+++ export BASE_PYPI_INDEX
+++ echo BASE_PYPI_INDEX
BASE_PYPI_INDEX
+++ IFS=
+++ read -r var
+++ export BASE_RELEASE_COMPRESS
+++ echo BASE_RELEASE_COMPRESS
BASE_RELEASE_COMPRESS
+++ IFS=
+++ read -r var
+++ export BASE_RELEASE_IMG_NAME
+++ echo BASE_RELEASE_IMG_NAME
BASE_RELEASE_IMG_NAME
+++ IFS=
+++ read -r var
+++ export BASE_RELEASE_ZIP_NAME
+++ echo BASE_RELEASE_ZIP_NAME
BASE_RELEASE_ZIP_NAME
+++ IFS=
+++ read -r var
+++ export BASE_ROOT_PARTITION
+++ echo BASE_ROOT_PARTITION
BASE_ROOT_PARTITION
+++ IFS=
+++ read -r var
+++ export BASE_SSH_ENABLE
+++ echo BASE_SSH_ENABLE
BASE_SSH_ENABLE
+++ IFS=
+++ read -r var
+++ export BASE_USER
+++ echo BASE_USER
BASE_USER
+++ IFS=
+++ read -r var
+++ export BASE_USER_PASSWORD
+++ echo BASE_USER_PASSWORD
BASE_USER_PASSWORD
+++ IFS=
+++ read -r var
+++ export BASE_VERSION
+++ echo BASE_VERSION
BASE_VERSION
+++ IFS=
+++ read -r var
+++ export BASE_WORKSPACE
+++ echo BASE_WORKSPACE
BASE_WORKSPACE
+++ IFS=
+++ read -r var
+++ export BASE_ZIP_IMG
+++ echo BASE_ZIP_IMG
BASE_ZIP_IMG
+++ IFS=
+++ read -r var
+++ echo ================================================================
================================================================
+++ for module in $(echo "${MODULES_LIST}" | tr "," "\n")
+++ '[' -d /home/debian/pistompOS/pistompOS/src/modules/network ']'
+++ '[' -d /home/debian/pistompOS/src/modules/network ']'
+++ export MODULE_PATH=/home/debian/pistompOS/src/modules/network
+++ MODULE_PATH=/home/debian/pistompOS/src/modules/network
+++ echo 'loading network config at /home/debian/pistompOS/src/modules/network/config'
loading network config at /home/debian/pistompOS/src/modules/network/config
+++ '[' -f /home/debian/pistompOS/src/modules/network/config ']'
+++ source /home/debian/pistompOS/src/modules/network/config
++++ '[' -n '' ']'
++++ NETWORK_DISABLE_PWRSAVE=yes
++++ '[' -n '' ']'
++++ NETWORK_PWRSAVE_TYPE=udev
+++ echo ================================================================
================================================================
+++ echo 'Using the following config:'
Using the following config:
+++ module_up=NETWORK
+++ module_up=NETWORK_
+++ IFS=
+++ read -r var
++++ compgen -A variable NETWORK_
+++ export NETWORK_DISABLE_PWRSAVE
+++ echo NETWORK_DISABLE_PWRSAVE
NETWORK_DISABLE_PWRSAVE
+++ IFS=
+++ read -r var
+++ export NETWORK_PWRSAVE_TYPE
+++ echo NETWORK_PWRSAVE_TYPE
NETWORK_PWRSAVE_TYPE
+++ IFS=
+++ read -r var
+++ echo ================================================================
================================================================
+++ for module in $(echo "${MODULES_LIST}" | tr "," "\n")
+++ '[' -d /home/debian/pistompOS/pistompOS/src/modules/req_preinstall ']'
+++ export MODULE_PATH=/home/debian/pistompOS/pistompOS/src/modules/req_preinstall
+++ MODULE_PATH=/home/debian/pistompOS/pistompOS/src/modules/req_preinstall
+++ echo 'loading req_preinstall config at /home/debian/pistompOS/pistompOS/src/modules/req_preinstall/config'
loading req_preinstall config at /home/debian/pistompOS/pistompOS/src/modules/req_preinstall/config
+++ '[' -f /home/debian/pistompOS/pistompOS/src/modules/req_preinstall/config ']'
+++ source /home/debian/pistompOS/pistompOS/src/modules/req_preinstall/config
++++ '[' -n '' ']'
++++ IS_REQ_PREINSTALL_DEPS='virtualenv python3-pip python3-dev python3-zeroconf build-essential libasound2-dev libjack-jackd2-dev                         zlib1g-dev cmake gperf intltool ladspa-sdk libarmadillo-dev libavahi-gobject-dev liblilv-dev libjpeg-dev libserd-dev libsord-dev libsratom-dev                         libavcodec-dev libavutil-dev libbluetooth-dev libboost-dev libeigen3-dev libfftw3-dev libglib2.0-dev libglibmm-2.4-dev                         libgtk2.0-dev libgtkmm-2.4-dev liblrdf0-dev libsamplerate0-dev libsigc++-2.0-dev libsndfile1-dev libzita-convolver-dev                         libzita-resampler-dev lv2-dev p7zip-full python3-all python3-setuptools libreadline-dev zita-alsa-pcmi-utils hostapd                         dnsmasq iptables python3-smbus liblo-dev python3-liblo libzita-alsa-pcmi-dev authbind rcconf libfluidsynth-dev lockfile-progs'
++++ '[' -n '' ']'
++++ IS_REQ_PREINSTALL_PIP='pyserial==3.0 pystache==0.5.4 aggdraw==1.3.11 scandir backports.shutil-get-terminal-size                         pycrypto tornado==4.3 Pillow==9.4.0 cython pyyaml jsonschema pyalsaaudio python-rtmidi requests RPi.GPIO gfxhat                         matplotlib rpi_ws281x adafruit-circuitpython-neopixel adafruit-circuitpython-rgb-display adafruit-circuitpython-mcp3xxx python-config'
+++ echo ================================================================
================================================================
+++ echo 'Using the following config:'
Using the following config:
+++ module_up=REQ_PREINSTALL
+++ module_up=REQ_PREINSTALL_
+++ IFS=
++++ compgen -A variable REQ_PREINSTALL_
+++ read -r var
+++ echo ================================================================
================================================================
+++ for module in $(echo "${MODULES_LIST}" | tr "," "\n")
+++ '[' -d /home/debian/pistompOS/pistompOS/src/modules/lilv ']'
+++ export MODULE_PATH=/home/debian/pistompOS/pistompOS/src/modules/lilv
+++ MODULE_PATH=/home/debian/pistompOS/pistompOS/src/modules/lilv
+++ echo 'loading lilv config at /home/debian/pistompOS/pistompOS/src/modules/lilv/config'
loading lilv config at /home/debian/pistompOS/pistompOS/src/modules/lilv/config
+++ '[' -f /home/debian/pistompOS/pistompOS/src/modules/lilv/config ']'
+++ source /home/debian/pistompOS/pistompOS/src/modules/lilv/config
++++ '[' -n ']'
+++ echo ================================================================
================================================================
+++ echo 'Using the following config:'
Using the following config:
+++ module_up=LILV
+++ module_up=LILV_
+++ IFS=
+++ read -r var
++++ compgen -A variable LILV_
+++ echo ================================================================
================================================================
+++ for module in $(echo "${MODULES_LIST}" | tr "," "\n")
+++ '[' -d /home/debian/pistompOS/pistompOS/src/modules/auto-mount-removable ']'
+++ export MODULE_PATH=/home/debian/pistompOS/pistompOS/src/modules/auto-mount-removable
+++ MODULE_PATH=/home/debian/pistompOS/pistompOS/src/modules/auto-mount-removable
+++ echo 'loading auto-mount-removable config at /home/debian/pistompOS/pistompOS/src/modules/auto-mount-removable/config'
loading auto-mount-removable config at /home/debian/pistompOS/pistompOS/src/modules/auto-mount-removable/config
+++ '[' -f /home/debian/pistompOS/pistompOS/src/modules/auto-mount-removable/config ']'
+++ echo 'WARNING: module auto-mount-removable has no config file'
WARNING: module auto-mount-removable has no config file
+++ echo ================================================================
================================================================
+++ echo 'Using the following config:'
Using the following config:
+++ module_up=AUTO-MOUNT-REMOVABLE
+++ module_up=AUTO_MOUNT_REMOVABLE_
+++ IFS=
+++ read -r var
++++ compgen -A variable AUTO_MOUNT_REMOVABLE_
+++ echo ================================================================
================================================================
+++ for module in $(echo "${MODULES_LIST}" | tr "," "\n")
+++ '[' -d /home/debian/pistompOS/pistompOS/src/modules/mod ']'
+++ export MODULE_PATH=/home/debian/pistompOS/pistompOS/src/modules/mod
+++ MODULE_PATH=/home/debian/pistompOS/pistompOS/src/modules/mod
+++ echo 'loading mod config at /home/debian/pistompOS/pistompOS/src/modules/mod/config'
loading mod config at /home/debian/pistompOS/pistompOS/src/modules/mod/config
+++ '[' -f /home/debian/pistompOS/pistompOS/src/modules/mod/config ']'
+++ source /home/debian/pistompOS/pistompOS/src/modules/mod/config
++++ '[' -n '' ']'
++++ JACK_REPO_SHIP=https://github.com/micahvdm/jack2.git
++++ '[' -n '' ']'
++++ BROWSEPY_REPO_SHIP=https://github.com/micahvdm/browsepy.git
++++ '[' -n '' ']'
++++ MODHOST_REPO_SHIP=https://github.com/micahvdm/mod-host.git
++++ '[' -n '' ']'
++++ MODUI_REPO_SHIP=https://github.com/micahvdm/mod-ui.git
++++ '[' -n '' ']'
++++ MODMIDI_REPO_SHIP=https://github.com/micahvdm/mod-midi-merger.git
++++ '[' -n '' ']'
++++ AMIDI_REPO_SHIP=https://github.com/BlokasLabs/amidithru.git
++++ '[' -n '' ']'
++++ TOUCHOSC_REPO_SHIP=https://github.com/micahvdm/touchosc2midi.git
+++ echo ================================================================
================================================================
+++ echo 'Using the following config:'
Using the following config:
+++ module_up=MOD
+++ module_up=MOD_
+++ IFS=
+++ read -r var
++++ compgen -A variable MOD_
+++ echo ================================================================
================================================================
+++ for module in $(echo "${MODULES_LIST}" | tr "," "\n")
+++ '[' -d /home/debian/pistompOS/pistompOS/src/modules/mod_ttymidi ']'
+++ export MODULE_PATH=/home/debian/pistompOS/pistompOS/src/modules/mod_ttymidi
+++ MODULE_PATH=/home/debian/pistompOS/pistompOS/src/modules/mod_ttymidi
+++ echo 'loading mod_ttymidi config at /home/debian/pistompOS/pistompOS/src/modules/mod_ttymidi/config'
loading mod_ttymidi config at /home/debian/pistompOS/pistompOS/src/modules/mod_ttymidi/config
+++ '[' -f /home/debian/pistompOS/pistompOS/src/modules/mod_ttymidi/config ']'
+++ source /home/debian/pistompOS/pistompOS/src/modules/mod_ttymidi/config
++++ '[' -n ']'
+++ echo ================================================================
================================================================
+++ echo 'Using the following config:'
Using the following config:
+++ module_up=MOD_TTYMIDI
+++ module_up=MOD_TTYMIDI_
+++ IFS=
+++ read -r var
++++ compgen -A variable MOD_TTYMIDI_
+++ echo ================================================================
================================================================
+++ for module in $(echo "${MODULES_LIST}" | tr "," "\n")
+++ '[' -d /home/debian/pistompOS/pistompOS/src/modules/audio ']'
+++ export MODULE_PATH=/home/debian/pistompOS/pistompOS/src/modules/audio
+++ MODULE_PATH=/home/debian/pistompOS/pistompOS/src/modules/audio
+++ echo 'loading audio config at /home/debian/pistompOS/pistompOS/src/modules/audio/config'
loading audio config at /home/debian/pistompOS/pistompOS/src/modules/audio/config
+++ '[' -f /home/debian/pistompOS/pistompOS/src/modules/audio/config ']'
+++ echo 'WARNING: module audio has no config file'
WARNING: module audio has no config file
+++ echo ================================================================
================================================================
+++ echo 'Using the following config:'
Using the following config:
+++ module_up=AUDIO
+++ module_up=AUDIO_
+++ IFS=
+++ read -r var
++++ compgen -A variable AUDIO_
+++ echo ================================================================
================================================================
+++ for module in $(echo "${MODULES_LIST}" | tr "," "\n")
+++ '[' -d /home/debian/pistompOS/pistompOS/src/modules/pistomp ']'
+++ export MODULE_PATH=/home/debian/pistompOS/pistompOS/src/modules/pistomp
+++ MODULE_PATH=/home/debian/pistompOS/pistompOS/src/modules/pistomp
+++ echo 'loading pistomp config at /home/debian/pistompOS/pistompOS/src/modules/pistomp/config'
loading pistomp config at /home/debian/pistompOS/pistompOS/src/modules/pistomp/config
+++ '[' -f /home/debian/pistompOS/pistompOS/src/modules/pistomp/config ']'
+++ source /home/debian/pistompOS/pistompOS/src/modules/pistomp/config
++++ '[' -n '' ']'
++++ PISTOMP_REPO_SHIP=https://github.com/TreeFallSound/pi-stomp.git
++++ '[' -n '' ']'
++++ PISTOMP_REPO_BRANCH=master
+++ echo ================================================================
================================================================
+++ echo 'Using the following config:'
Using the following config:
+++ module_up=PISTOMP
+++ module_up=PISTOMP_
+++ IFS=
+++ read -r var
++++ compgen -A variable PISTOMP_
+++ export PISTOMP_REPO_BRANCH
+++ echo PISTOMP_REPO_BRANCH
PISTOMP_REPO_BRANCH
+++ IFS=
+++ read -r var
+++ export PISTOMP_REPO_SHIP
+++ echo PISTOMP_REPO_SHIP
PISTOMP_REPO_SHIP
+++ IFS=
+++ read -r var
+++ echo ================================================================
================================================================
+++ for module in $(echo "${MODULES_LIST}" | tr "," "\n")
+++ '[' -d /home/debian/pistompOS/pistompOS/src/modules/services ']'
+++ export MODULE_PATH=/home/debian/pistompOS/pistompOS/src/modules/services
+++ MODULE_PATH=/home/debian/pistompOS/pistompOS/src/modules/services
+++ echo 'loading services config at /home/debian/pistompOS/pistompOS/src/modules/services/config'
loading services config at /home/debian/pistompOS/pistompOS/src/modules/services/config
+++ '[' -f /home/debian/pistompOS/pistompOS/src/modules/services/config ']'
+++ echo 'WARNING: module services has no config file'
WARNING: module services has no config file
+++ echo ================================================================
================================================================
+++ echo 'Using the following config:'
Using the following config:
+++ module_up=SERVICES
+++ module_up=SERVICES_
+++ IFS=
+++ read -r var
++++ compgen -A variable SERVICES_
+++ echo ================================================================
================================================================
+++ for module in $(echo "${MODULES_LIST}" | tr "," "\n")
+++ '[' -d /home/debian/pistompOS/pistompOS/src/modules/sys ']'
+++ export MODULE_PATH=/home/debian/pistompOS/pistompOS/src/modules/sys
+++ MODULE_PATH=/home/debian/pistompOS/pistompOS/src/modules/sys
+++ echo 'loading sys config at /home/debian/pistompOS/pistompOS/src/modules/sys/config'
loading sys config at /home/debian/pistompOS/pistompOS/src/modules/sys/config
+++ '[' -f /home/debian/pistompOS/pistompOS/src/modules/sys/config ']'
+++ echo 'WARNING: module sys has no config file'
WARNING: module sys has no config file
+++ echo ================================================================
================================================================
+++ echo 'Using the following config:'
Using the following config:
+++ module_up=SYS
+++ module_up=SYS_
+++ IFS=
+++ read -r var
++++ compgen -A variable SYS_
+++ echo ================================================================
================================================================
+++ for module in $(echo "${MODULES_LIST}" | tr "," "\n")
+++ '[' -d /home/debian/pistompOS/pistompOS/src/modules/kernel ']'
+++ export MODULE_PATH=/home/debian/pistompOS/pistompOS/src/modules/kernel
+++ MODULE_PATH=/home/debian/pistompOS/pistompOS/src/modules/kernel
+++ echo 'loading kernel config at /home/debian/pistompOS/pistompOS/src/modules/kernel/config'
loading kernel config at /home/debian/pistompOS/pistompOS/src/modules/kernel/config
+++ '[' -f /home/debian/pistompOS/pistompOS/src/modules/kernel/config ']'
+++ source /home/debian/pistompOS/pistompOS/src/modules/kernel/config
++++ export 'KERNEL_CONFIG_APPEND=CONFIG_PREEMPT_RT_FULL=y
CONFIG_DEBUG_PREEMPT=n
CONFIG_PREEMPT_TRACER=n
CONFIG_RCU_CPU_STALL_TIMEOUT=21'
++++ KERNEL_CONFIG_APPEND='CONFIG_PREEMPT_RT_FULL=y
CONFIG_DEBUG_PREEMPT=n
CONFIG_PREEMPT_TRACER=n
CONFIG_RCU_CPU_STALL_TIMEOUT=21'
+++ echo ================================================================
================================================================
+++ echo 'Using the following config:'
Using the following config:
+++ module_up=KERNEL
+++ module_up=KERNEL_
+++ IFS=
+++ read -r var
++++ compgen -A variable KERNEL_
+++ export KERNEL_CONFIG_APPEND
+++ echo KERNEL_CONFIG_APPEND
KERNEL_CONFIG_APPEND
+++ IFS=
+++ read -r var
+++ echo ================================================================
================================================================
++ /home/debian/pistompOS/src/config_sanity
++ '[' '' == yes ']'
++ source /home/debian/pistompOS/src/custompios
+++ set -e
+++ export LC_ALL=C
+++ LC_ALL=C
+++ source /home/debian/pistompOS/src/common.sh
++++ date
+++ echo_green -e '\nBUILD STARTED @ Fri Mar 15 07:28:27 PDT 2024!\n'
+++ echo -e -n '\e[92m'
[92m+++ echo -e '\nBUILD' STARTED @ Fri Mar 15 07:28:27 PDT '2024!\n'

BUILD STARTED @ Fri Mar 15 07:28:27 PDT 2024!

+++ echo -e -n '\e[0m'
[0m+++ '[' -n 200 ']'
+++ which sfdisk
+++ mkdir -p /home/debian/pistompOS/pistompOS/src/workspace
+++ mkdir -p /home/debian/pistompOS/pistompOS/src/workspace/mount
+++ rm -rf '/home/debian/pistompOS/pistompOS/src/workspace/*.tar.gz'
+++ install_cleanup_trap
+++ set -e
+++ trap cleanup SIGINT SIGTERM
+++ install_fail_on_error_trap
+++ set -e
+++ trap 'echo_red "build failed, unmounting image..." && cd $DIST_PATH && ( unmount_image $BASE_MOUNT_PATH force || true ) && echo_red -e "\nBUILD FAILED!\n"' ERR
+++ unmount_image /home/debian/pistompOS/pistompOS/src/workspace/mount force
+++ mount_path=/home/debian/pistompOS/pistompOS/src/workspace/mount
+++ force=
+++ '[' 2 -gt 1 ']'
+++ force=force
+++ sync
+++ '[' -n force ']'
++++ sudo lsof -t /home/debian/pistompOS/pistompOS/src/workspace/mount
++++ sudo mount
++++ grep /home/debian/pistompOS/pistompOS/src/workspace/mount
++++ awk -F ' on ' '{print $2}'
++++ awk '{print $1}'
++++ sort -r
+++ pushd /home/debian/pistompOS/pistompOS/src/workspace
/home/debian/pistompOS/pistompOS/src/workspace /home/debian/pistompOS/pistompOS/src
+++ '[' -e 2024-03-12-raspios-bullseye-arm64-lite.img ']'
+++ rm 2024-03-12-raspios-bullseye-arm64-lite.img
+++ '[' '!' -f /home/debian/pistompOS/pistompOS/src/image/2024-03-12-raspios-bullseye-arm64-lite.img.xz ']'
+++ '[' /home/debian/pistompOS/pistompOS/src/image/2024-03-12-raspios-bullseye-arm64-lite.img.xz == '' ']'
+++ [[ /home/debian/pistompOS/pistompOS/src/image/2024-03-12-raspios-bullseye-arm64-lite.img.xz =~ \.img$ ]]
+++ 7za x -aoa /home/debian/pistompOS/pistompOS/src/image/2024-03-12-raspios-bullseye-arm64-lite.img.xz

7-Zip (a) [64] 16.02 : Copyright (c) 1999-2016 Igor Pavlov : 2016-05-21
p7zip Version 16.02 (locale=C,Utf16=off,HugeFiles=on,64 bits,6 CPUs LE)

Scanning the drive for archives:
1 file, 323539904 bytes (309 MiB)

Extracting archive: /home/debian/pistompOS/pistompOS/src/image/2024-03-12-raspios-bullseye-arm64-lite.img.xz
--
Path = /home/debian/pistompOS/pistompOS/src/image/2024-03-12-raspios-bullseye-arm64-lite.img.xz
Type = xz
Physical Size = 323539904
Method = LZMA2:26 CRC64
Streams = 1
Blocks = 11

Everything is Ok

Size:       2105540608
Compressed: 323539904
++++ ls
++++ grep '.img$\|.raw$'
++++ head -n 1
+++ BASE_IMG_PATH=2024-03-12-raspios-bullseye-arm64-lite.img
+++ '[' '!' -f 2024-03-12-raspios-bullseye-arm64-lite.img ']'
++++ basename 2024-03-12-raspios-bullseye-arm64-lite.img
+++ export CUSTOM_PI_OS_BUILDBASE=2024-03-12-raspios-bullseye-arm64-lite.img
+++ CUSTOM_PI_OS_BUILDBASE=2024-03-12-raspios-bullseye-arm64-lite.img
+++ '[' -n 200 ']'
+++ enlarge_ext 2024-03-12-raspios-bullseye-arm64-lite.img 2 200
+++ image=2024-03-12-raspios-bullseye-arm64-lite.img
+++ partition=2
+++ size=200
+++ echo_green 'Adding 200 MB to partition 2 of 2024-03-12-raspios-bullseye-arm64-lite.img'
+++ echo -e -n '\e[92m'
[92m+++ echo Adding 200 MB to partition 2 of 2024-03-12-raspios-bullseye-arm64-lite.img
Adding 200 MB to partition 2 of 2024-03-12-raspios-bullseye-arm64-lite.img
+++ echo -e -n '\e[0m'
[0m++++ sfdisk --json 2024-03-12-raspios-bullseye-arm64-lite.img
++++ jq '.partitiontable.partitions[] | select(.node ==  "2024-03-12-raspios-bullseye-arm64-lite.img2").start'
+++ start=532480
+++ offset=272629760
+++ dd if=/dev/zero bs=1M count=200
200+0 records in
200+0 records out
209715200 bytes (210 MB, 200 MiB) copied, 0.425799 s, 493 MB/s
+++ fdisk 2024-03-12-raspios-bullseye-arm64-lite.img

Welcome to fdisk (util-linux 2.36.1).
Changes will remain in memory only, until you decide to write them.
Be careful before using the write command.


Command (m for help): Disk 2024-03-12-raspios-bullseye-arm64-lite.img: 2.16 GiB, 2315255808 bytes, 4521984 sectors
Units: sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disklabel type: dos
Disk identifier: 0xf49c91b1

Device                                      Boot  Start     End Sectors  Size Id Type
2024-03-12-raspios-bullseye-arm64-lite.img1        8192  532479  524288  256M  c W95 FAT32 (LBA)
2024-03-12-raspios-bullseye-arm64-lite.img2      532480 4112383 3579904  1.7G 83 Linux

Command (m for help): Partition number (1,2, default 2): 
Partition 2 has been deleted.

Command (m for help): Partition type
   p   primary (1 primary, 0 extended, 3 free)
   e   extended (container for logical partitions)
Select (default p): Partition number (2-4, default 2): First sector (2048-4521983, default 2048): Last sector, +/-sectors or +/-size{K,M,G,T,P} (532480-4521983, default 4521983): 
Created a new partition 2 of type 'Linux' and of size 1.9 GiB.
Partition #2 contains a ext4 signature.

Command (m for help): 
Disk 2024-03-12-raspios-bullseye-arm64-lite.img: 2.16 GiB, 2315255808 bytes, 4521984 sectors
Units: sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disklabel type: dos
Disk identifier: 0xf49c91b1

Device                                      Boot  Start     End Sectors  Size Id Type
2024-03-12-raspios-bullseye-arm64-lite.img1        8192  532479  524288  256M  c W95 FAT32 (LBA)
2024-03-12-raspios-bullseye-arm64-lite.img2      532480 4521983 3989504  1.9G 83 Linux

Command (m for help): The partition table has been altered.
Syncing disks.

+++ detach_all_loopback 2024-03-12-raspios-bullseye-arm64-lite.img
++++ losetup
++++ grep 2024-03-12-raspios-bullseye-arm64-lite.img
++++ awk '{ print $1 }'
+++ test_for_image 2024-03-12-raspios-bullseye-arm64-lite.img
+++ '[' '!' -f 2024-03-12-raspios-bullseye-arm64-lite.img ']'
++++ losetup -f --show -o 272629760 2024-03-12-raspios-bullseye-arm64-lite.img
+++ LODEV=/dev/loop0
+++ trap 'losetup -d $LODEV' EXIT
+++ file -Ls /dev/loop0
+++ grep -qi ext
+++ e2fsck -fy /dev/loop0
e2fsck 1.46.2 (28-Feb-2021)
Pass 1: Checking inodes, blocks, and sizes
Inode 39631 extent tree (at level 1) could be narrower.  Optimize? yes

Inode 39695 extent tree (at level 1) could be narrower.  Optimize? yes

Inode 39699 extent tree (at level 1) could be narrower.  Optimize? yes

Inode 39703 extent tree (at level 2) could be narrower.  Optimize? yes

Inode 40225 extent tree (at level 1) could be narrower.  Optimize? yes

Inode 42384 extent tree (at level 2) could be narrower.  Optimize? yes

Inode 42385 extent tree (at level 2) could be narrower.  Optimize? yes

Pass 1E: Optimizing extent trees
Pass 2: Checking directory structure
Pass 3: Checking directory connectivity
Pass 4: Checking reference counts
Pass 5: Checking group summary information

rootfs: ***** FILE SYSTEM WAS MODIFIED *****
rootfs: 41871/112000 files (0.2% non-contiguous), 332640/447488 blocks
+++ resize2fs -p /dev/loop0
resize2fs 1.46.2 (28-Feb-2021)
Resizing the filesystem on /dev/loop0 to 498688 (4k) blocks.
The filesystem on /dev/loop0 is now 498688 (4k) blocks long.

+++ losetup -d /dev/loop0
+++ trap - EXIT
+++ echo_green 'Resized partition 2 of 2024-03-12-raspios-bullseye-arm64-lite.img to +200 MB'
+++ echo -e -n '\e[92m'
[92m+++ echo Resized partition 2 of 2024-03-12-raspios-bullseye-arm64-lite.img to +200 MB
Resized partition 2 of 2024-03-12-raspios-bullseye-arm64-lite.img to +200 MB
+++ echo -e -n '\e[0m'
[0m+++ mount_image 2024-03-12-raspios-bullseye-arm64-lite.img 2 /home/debian/pistompOS/pistompOS/src/workspace/mount boot ''
+++ image_path=2024-03-12-raspios-bullseye-arm64-lite.img
+++ root_partition=2
+++ mount_path=/home/debian/pistompOS/pistompOS/src/workspace/mount
+++ boot_mount_path=boot
+++ '[' 5 -gt 3 ']'
+++ boot_mount_path=boot
+++ '[' 5 -gt 4 ']'
+++ '[' '' '!=' '' ']'
+++ boot_partition=1
++++ sfdisk --json 2024-03-12-raspios-bullseye-arm64-lite.img
+++ fdisk_output='{
   "partitiontable": {
      "label":"dos",
      "id":"0xf49c91b1",
      "device":"2024-03-12-raspios-bullseye-arm64-lite.img",
      "unit":"sectors",
      "sectorsize":512,
      "partitions": [
         {"node":"2024-03-12-raspios-bullseye-arm64-lite.img1", "start":8192, "size":524288, "type":"c"},
         {"node":"2024-03-12-raspios-bullseye-arm64-lite.img2", "start":532480, "size":3989504, "type":"83"}
      ]
   }
}'
++++ jq '.partitiontable.partitions[] | select(.node == "2024-03-12-raspios-bullseye-arm64-lite.img1").start'
+++ boot_offset=4194304
++++ jq '.partitiontable.partitions[] | select(.node == "2024-03-12-raspios-bullseye-arm64-lite.img2").start'
+++ root_offset=272629760
+++ echo_green 'Mounting image 2024-03-12-raspios-bullseye-arm64-lite.img on /home/debian/pistompOS/pistompOS/src/workspace/mount, offset for boot partition is 4194304, offset for root partition is 272629760'
+++ echo -e -n '\e[92m'
[92m+++ echo Mounting image 2024-03-12-raspios-bullseye-arm64-lite.img on /home/debian/pistompOS/pistompOS/src/workspace/mount, offset for boot partition is 4194304, offset for root partition is 272629760
Mounting image 2024-03-12-raspios-bullseye-arm64-lite.img on /home/debian/pistompOS/pistompOS/src/workspace/mount, offset for boot partition is 4194304, offset for root partition is 272629760
+++ echo -e -n '\e[0m'
[0m+++ detach_all_loopback 2024-03-12-raspios-bullseye-arm64-lite.img
++++ losetup
++++ grep 2024-03-12-raspios-bullseye-arm64-lite.img
++++ awk '{ print $1 }'
+++ echo_green 'Mounting root partition'
+++ echo -e -n '\e[92m'
[92m+++ echo Mounting root partition
Mounting root partition
+++ echo -e -n '\e[0m'
[0m+++ sudo losetup -f
/dev/loop0
+++ sudo mount -o loop,offset=272629760 2024-03-12-raspios-bullseye-arm64-lite.img /home/debian/pistompOS/pistompOS/src/workspace/mount/
+++ [[ 1 != \2 ]]
+++ echo_green 'Mounting boot partition'
+++ echo -e -n '\e[92m'
[92m+++ echo Mounting boot partition
Mounting boot partition
+++ echo -e -n '\e[0m'
[0m+++ sudo losetup -f
/dev/loop1
++++ expr 272629760 - 4194304
+++ sudo mount -o loop,offset=4194304,sizelimit=268435456 2024-03-12-raspios-bullseye-arm64-lite.img /home/debian/pistompOS/pistompOS/src/workspace/mount/boot
+++ sudo mkdir -p /home/debian/pistompOS/pistompOS/src/workspace/mount/dev/pts
+++ sudo mkdir -p /home/debian/pistompOS/pistompOS/src/workspace/mount/proc
+++ sudo mount -o bind /dev /home/debian/pistompOS/pistompOS/src/workspace/mount/dev
+++ sudo mount -o bind /dev/pts /home/debian/pistompOS/pistompOS/src/workspace/mount/dev/pts
+++ sudo mount -o bind /proc /home/debian/pistompOS/pistompOS/src/workspace/mount/proc
+++ '[' -n /home/debian/pistompOS/pistompOS/src/workspace/aptcache ']'
+++ '[' /home/debian/pistompOS/pistompOS/src/workspace/aptcache '!=' no ']'
+++ mkdir -p /home/debian/pistompOS/pistompOS/src/workspace/aptcache
+++ mount --bind /home/debian/pistompOS/pistompOS/src/workspace/aptcache /home/debian/pistompOS/pistompOS/src/workspace/mount/var/cache/apt
+++ pushd /home/debian/pistompOS/pistompOS/src/workspace/mount
/home/debian/pistompOS/pistompOS/src/workspace/mount /home/debian/pistompOS/pistompOS/src/workspace /home/debian/pistompOS/pistompOS/src
+++ '[' yes == yes ']'
+++ fixLd
+++ '[' -f etc/ld.so.preload ']'
+++ '[' -n '' ']'
+++ '[' -n '' ']'
+++ CHROOT_SCRIPT=/home/debian/pistompOS/pistompOS/src/workspace/chroot_script
+++ python3 /home/debian/pistompOS/src/execution_order.py 'base,network,req_preinstall,lilv,auto-mount-removable(mod,mod_ttymidi,audio,pistomp,services,sys),kernel' /home/debian/pistompOS/pistompOS/src/workspace/chroot_script
WARNING: No file at - /home/debian/pistompOS/src/modules/network/end_chroot_script
WARNING: No file at - /home/debian/pistompOS/pistompOS/src/modules/req_preinstall/end_chroot_script
WARNING: No file at - /home/debian/pistompOS/pistompOS/src/modules/lilv/end_chroot_script
WARNING: No file at - /home/debian/pistompOS/pistompOS/src/modules/mod/end_chroot_script
WARNING: No file at - /home/debian/pistompOS/pistompOS/src/modules/mod_ttymidi/end_chroot_script
WARNING: No file at - /home/debian/pistompOS/pistompOS/src/modules/audio/end_chroot_script
WARNING: No file at - /home/debian/pistompOS/pistompOS/src/modules/pistomp/end_chroot_script
WARNING: No file at - /home/debian/pistompOS/pistompOS/src/modules/services/end_chroot_script
WARNING: No file at - /home/debian/pistompOS/pistompOS/src/modules/sys/end_chroot_script
WARNING: No file at - /home/debian/pistompOS/pistompOS/src/modules/auto-mount-removable/end_chroot_script
WARNING: No file at - /home/debian/pistompOS/pistompOS/src/modules/kernel/end_chroot_script
+++ export -f execute_chroot_script
+++ bash -x /home/debian/pistompOS/pistompOS/src/workspace/chroot_script
+ set -x
+ set -e
+ execute_chroot_script /home/debian/pistompOS/pistompOS/src/modules/base /home/debian/pistompOS/pistompOS/src/modules/base/start_chroot_script
+ '[' -f /.dockerenv ']'
+ '[' -d /home/debian/pistompOS/pistompOS/src/modules/base/filesystem ']'
+ cp -vr --preserve=mode,timestamps /home/debian/pistompOS/pistompOS/src/modules/base/filesystem .
'/home/debian/pistompOS/pistompOS/src/modules/base/filesystem' -> './filesystem'
'/home/debian/pistompOS/pistompOS/src/modules/base/filesystem/ubuntu' -> './filesystem/ubuntu'
'/home/debian/pistompOS/pistompOS/src/modules/base/filesystem/ubuntu/usr' -> './filesystem/ubuntu/usr'
'/home/debian/pistompOS/pistompOS/src/modules/base/filesystem/ubuntu/usr/lib' -> './filesystem/ubuntu/usr/lib'
'/home/debian/pistompOS/pistompOS/src/modules/base/filesystem/ubuntu/usr/lib/dhcpcd' -> './filesystem/ubuntu/usr/lib/dhcpcd'
'/home/debian/pistompOS/pistompOS/src/modules/base/filesystem/ubuntu/usr/lib/dhcpcd/dhcpcd-hooks' -> './filesystem/ubuntu/usr/lib/dhcpcd/dhcpcd-hooks'
'/home/debian/pistompOS/pistompOS/src/modules/base/filesystem/ubuntu/usr/lib/dhcpcd/dhcpcd-hooks/10-wpa_supplicant' -> './filesystem/ubuntu/usr/lib/dhcpcd/dhcpcd-hooks/10-wpa_supplicant'
++ uname -m
+ '[' aarch64 '!=' armv7l ']'
+ '[' arm64 == armv7l ']'
+ '[' arm64 == aarch64 ']'
+ '[' arm64 == arm64 ']'
+ grep -q gentoo /etc/os-release
++ which qemu-aarch64-static
+ cp /usr/bin/qemu-aarch64-static usr/bin/qemu-aarch64-static
+ cp /home/debian/pistompOS/pistompOS/src/modules/base/start_chroot_script chroot_script
+ chmod 755 chroot_script
+ cp /home/debian/pistompOS/src/common.sh common.sh
+ chmod 755 common.sh
++ uname -m
+ '[' aarch64 '!=' armv7l ']'
++ uname -m
+ '[' aarch64 '!=' aarch64 ']'
+ '[' arm64 == armv7l ']'
+ echo 'Building on ARM device a armv7l/aarch64/arm64 system, not using qemu'
Building on ARM device a armv7l/aarch64/arm64 system, not using qemu
+ chroot . /bin/bash /chroot_script
+ set -e
+ export LC_ALL=C
+ LC_ALL=C
+ source /common.sh
+ install_cleanup_trap
+ set -e
+ trap cleanup SIGINT SIGTERM
+ '[' -n '' ']'
+ '[' raspbian == ubuntu ']'
+ '[' yes == yes ']'
+ '[' raspbian == raspbian ']'
+ echo_green 'Setup default user and password ...'
+ echo -e -n '\e[92m'
[92m+ echo Setup default user and password ...
Setup default user and password ...
+ echo -e -n '\e[0m'
[0m++ get_os_version
++ local os_version
++ grep -c buster /etc/os-release
+ '[' 0 == 0 ']'
+ create_userconf
+ local pw_encrypt
+ '[' -n pistomp ']'
++ echo pistomp
++ openssl passwd -6 -stdin
+ pw_encrypt='$6$1O4/.JFNDRmXynzn$UuHFXW4tKkeYHxQ5Redpnwyp8saeoBaTaZywb8eMmJ9HEP4r29gjP12z6dK.xxZqf3NoRy/.FiAnf9iZur6aM.'
+ echo 'pistomp:$6$1O4/.JFNDRmXynzn$UuHFXW4tKkeYHxQ5Redpnwyp8saeoBaTaZywb8eMmJ9HEP4r29gjP12z6dK.xxZqf3NoRy/.FiAnf9iZur6aM.'
+ apt-get install --yes --only-upgrade userconf-pi
Reading package lists...
Building dependency tree...
Reading state information...
userconf-pi is already the newest version (0.5).
0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.
+ [[ -f /usr/bin/cancel-rename ]]
+ sed -i 's|do_boot_behaviour B2|do_boot_behaviour B1|g' /usr/bin/cancel-rename
+ '[' -n '' ']'
+ '[' -n '' ']'
+ '[' yes == yes ']'
+ touch /boot/ssh
+ echo 'IPQoS 0x00'
+ echo 'IPQoS 0x00'
+ '[' -f /lib/systemd/system/regenerate_ssh_host_keys.service ']'
+ sed -i 's@ExecStart=/usr/bin/ssh-keygen -A -v@ExecStart=/bin/bash -c '\'' /usr/bin/ssh-keygen -A -v >> /var/log/regenerate_ssh_host_keys.log 2>\&1'\''@g' /lib/systemd/system/regenerate_ssh_host_keys.service
+ sed -i 's@ExecStartPost=/bin/systemctl disable regenerate_ssh_host_keys@ExecStartPost=/bin/bash -c '\''for i in /etc/ssh/ssh_host_*_key*; do actualsize=$(wc -c <"$i") ;if [ $actualsize -eq 0 ]; then echo size is 0 bytes ; exit 1 ; fi ; done ; /bin/systemctl disable regenerate_ssh_host_keys'\''@g' /lib/systemd/system/regenerate_ssh_host_keys.service
+ echo 2024-03-12-raspios-bullseye-arm64-lite.img
+ echo 2.2.0
+ echo default
+ '[' default '!=' default ']'
+ '[' default '!=' default ']'
+ '[' default '!=' default ']'
+ '[' default '!=' default ']'
+ '[' no == yes ']'
+ '[' -d custompios_export ']'
+ rm chroot_script
+ '[' -d filesystem ']'
+ rm -rfv filesystem
removed 'filesystem/ubuntu/usr/lib/dhcpcd/dhcpcd-hooks/10-wpa_supplicant'
removed directory 'filesystem/ubuntu/usr/lib/dhcpcd/dhcpcd-hooks'
removed directory 'filesystem/ubuntu/usr/lib/dhcpcd'
removed directory 'filesystem/ubuntu/usr/lib'
removed directory 'filesystem/ubuntu/usr'
removed directory 'filesystem/ubuntu'
removed directory 'filesystem'
+ execute_chroot_script /home/debian/pistompOS/pistompOS/src/modules/base /home/debian/pistompOS/pistompOS/src/modules/base/end_chroot_script
+ '[' -f /.dockerenv ']'
+ '[' -d /home/debian/pistompOS/pistompOS/src/modules/base/filesystem ']'
+ cp -vr --preserve=mode,timestamps /home/debian/pistompOS/pistompOS/src/modules/base/filesystem .
'/home/debian/pistompOS/pistompOS/src/modules/base/filesystem' -> './filesystem'
'/home/debian/pistompOS/pistompOS/src/modules/base/filesystem/ubuntu' -> './filesystem/ubuntu'
'/home/debian/pistompOS/pistompOS/src/modules/base/filesystem/ubuntu/usr' -> './filesystem/ubuntu/usr'
'/home/debian/pistompOS/pistompOS/src/modules/base/filesystem/ubuntu/usr/lib' -> './filesystem/ubuntu/usr/lib'
'/home/debian/pistompOS/pistompOS/src/modules/base/filesystem/ubuntu/usr/lib/dhcpcd' -> './filesystem/ubuntu/usr/lib/dhcpcd'
'/home/debian/pistompOS/pistompOS/src/modules/base/filesystem/ubuntu/usr/lib/dhcpcd/dhcpcd-hooks' -> './filesystem/ubuntu/usr/lib/dhcpcd/dhcpcd-hooks'
'/home/debian/pistompOS/pistompOS/src/modules/base/filesystem/ubuntu/usr/lib/dhcpcd/dhcpcd-hooks/10-wpa_supplicant' -> './filesystem/ubuntu/usr/lib/dhcpcd/dhcpcd-hooks/10-wpa_supplicant'
++ uname -m
+ '[' aarch64 '!=' armv7l ']'
+ '[' arm64 == armv7l ']'
+ '[' arm64 == aarch64 ']'
+ '[' arm64 == arm64 ']'
+ grep -q gentoo /etc/os-release
++ which qemu-aarch64-static
+ cp /usr/bin/qemu-aarch64-static usr/bin/qemu-aarch64-static
+ cp /home/debian/pistompOS/pistompOS/src/modules/base/end_chroot_script chroot_script
+ chmod 755 chroot_script
+ cp /home/debian/pistompOS/src/common.sh common.sh
+ chmod 755 common.sh
++ uname -m
+ '[' aarch64 '!=' armv7l ']'
++ uname -m
+ '[' aarch64 '!=' aarch64 ']'
+ '[' arm64 == armv7l ']'
+ echo 'Building on ARM device a armv7l/aarch64/arm64 system, not using qemu'
Building on ARM device a armv7l/aarch64/arm64 system, not using qemu
+ chroot . /bin/bash /chroot_script
+ '[' -n '' ']'
+ '[' -n '' ']'
+ '[' -n '' ']'
+ '[' -f /etc/hostname ']'
+ read FILE_HOST_NAME
+ FILE_HOST_NAME=raspberrypi
+ echo pistomp
+ sed -i -e s@raspberrypi@pistomp@g /etc/hosts
+ '[' raspbian == ubuntu ']'
+ '[' yes = yes ']'
+ apt-get clean
+ apt-get autoremove -y
Reading package lists...
Building dependency tree...
Reading state information...
0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.
+ '[' -d custompios_export ']'
+ rm chroot_script
+ '[' -d filesystem ']'
+ rm -rfv filesystem
removed 'filesystem/ubuntu/usr/lib/dhcpcd/dhcpcd-hooks/10-wpa_supplicant'
removed directory 'filesystem/ubuntu/usr/lib/dhcpcd/dhcpcd-hooks'
removed directory 'filesystem/ubuntu/usr/lib/dhcpcd'
removed directory 'filesystem/ubuntu/usr/lib'
removed directory 'filesystem/ubuntu/usr'
removed directory 'filesystem/ubuntu'
removed directory 'filesystem'
+ execute_chroot_script /home/debian/pistompOS/src/modules/network /home/debian/pistompOS/src/modules/network/start_chroot_script
+ '[' -f /.dockerenv ']'
+ '[' -d /home/debian/pistompOS/src/modules/network/filesystem ']'
+ cp -vr --preserve=mode,timestamps /home/debian/pistompOS/src/modules/network/filesystem .
'/home/debian/pistompOS/src/modules/network/filesystem' -> './filesystem'
'/home/debian/pistompOS/src/modules/network/filesystem/boot' -> './filesystem/boot'
'/home/debian/pistompOS/src/modules/network/filesystem/boot/custompios-wpa-supplicant.txt' -> './filesystem/boot/custompios-wpa-supplicant.txt'
'/home/debian/pistompOS/src/modules/network/filesystem/etc' -> './filesystem/etc'
'/home/debian/pistompOS/src/modules/network/filesystem/etc/systemd' -> './filesystem/etc/systemd'
'/home/debian/pistompOS/src/modules/network/filesystem/etc/systemd/system' -> './filesystem/etc/systemd/system'
'/home/debian/pistompOS/src/modules/network/filesystem/etc/systemd/system/disable-wifi-pwr-mgmt.service' -> './filesystem/etc/systemd/system/disable-wifi-pwr-mgmt.service'
'/home/debian/pistompOS/src/modules/network/filesystem/etc/udev' -> './filesystem/etc/udev'
'/home/debian/pistompOS/src/modules/network/filesystem/etc/udev/rules.d' -> './filesystem/etc/udev/rules.d'
'/home/debian/pistompOS/src/modules/network/filesystem/etc/udev/rules.d/070-wifi-powersave.rules' -> './filesystem/etc/udev/rules.d/070-wifi-powersave.rules'
'/home/debian/pistompOS/src/modules/network/filesystem/usr' -> './filesystem/usr'
'/home/debian/pistompOS/src/modules/network/filesystem/usr/local' -> './filesystem/usr/local'
'/home/debian/pistompOS/src/modules/network/filesystem/usr/local/bin' -> './filesystem/usr/local/bin'
'/home/debian/pistompOS/src/modules/network/filesystem/usr/local/bin/pwrsave' -> './filesystem/usr/local/bin/pwrsave'
'/home/debian/pistompOS/src/modules/network/filesystem/usr/local/bin/pwrsave-udev' -> './filesystem/usr/local/bin/pwrsave-udev'
++ uname -m
+ '[' aarch64 '!=' armv7l ']'
+ '[' arm64 == armv7l ']'
+ '[' arm64 == aarch64 ']'
+ '[' arm64 == arm64 ']'
+ grep -q gentoo /etc/os-release
++ which qemu-aarch64-static
+ cp /usr/bin/qemu-aarch64-static usr/bin/qemu-aarch64-static
+ cp /home/debian/pistompOS/src/modules/network/start_chroot_script chroot_script
+ chmod 755 chroot_script
+ cp /home/debian/pistompOS/src/common.sh common.sh
+ chmod 755 common.sh
++ uname -m
+ '[' aarch64 '!=' armv7l ']'
++ uname -m
+ '[' aarch64 '!=' aarch64 ']'
+ '[' arm64 == armv7l ']'
+ echo 'Building on ARM device a armv7l/aarch64/arm64 system, not using qemu'
Building on ARM device a armv7l/aarch64/arm64 system, not using qemu
+ chroot . /bin/bash /chroot_script
+ set -e
+ export LC_ALL=C
+ LC_ALL=C
+ source /common.sh
+ install_cleanup_trap
+ set -e
+ trap cleanup SIGINT SIGTERM
+ unpack /filesystem/boot /boot
+ from=/filesystem/boot
+ to=/boot
+ owner=
+ '[' 2 -gt 2 ']'
+ mkdir -p /tmp/unpack/
+ cp -v -r --preserve=mode,timestamps /filesystem/boot/. /tmp/unpack/
'/filesystem/boot/./custompios-wpa-supplicant.txt' -> '/tmp/unpack/./custompios-wpa-supplicant.txt'
+ '[' -n '' ']'
+ cp -v -r --preserve=mode,ownership,timestamps /tmp/unpack/. /boot
'/tmp/unpack/./custompios-wpa-supplicant.txt' -> '/boot/./custompios-wpa-supplicant.txt'
+ rm -r /tmp/unpack
+ DIST_NETWORK_FILE=/boot/pistompos-wpa-supplicant.txt
+ mv /boot/custompios-wpa-supplicant.txt /boot/pistompos-wpa-supplicant.txt
+ '[' raspbian == ubuntu ']'
+ '[' raspbian == armbian ']'
+ cat /etc/wpa_supplicant/wpa_supplicant.conf
+ rm -f /etc/wpa_supplicant/wpa_supplicant.conf
+ '[' raspbian == raspbian ']'
+ rm /var/lib/systemd/rfkill/platform-3f300000.mmcnr:wlan /var/lib/systemd/rfkill/platform-fe300000.mmcnr:wlan
+ ln -s /boot/pistompos-wpa-supplicant.txt /etc/wpa_supplicant/wpa_supplicant.conf
+ '[' -f /etc/ifplugd/action.d/ifupdown ']'
+ '[' -f /etc/wpa_supplicant/ifupdown.sh ']'
+ ln -s /etc/wpa_supplicant/ifupdown.sh /etc/ifplugd/action.d/ifupdown
+ '[' '!' -f /etc/rc.local ']'
+ apt-get update --allow-releaseinfo-change
Hit:1 http://deb.debian.org/debian bullseye InRelease
Get:2 http://deb.debian.org/debian bullseye-updates InRelease [44.1 kB]
Get:3 http://archive.raspberrypi.org/debian bullseye InRelease [23.6 kB]
Get:4 http://archive.raspberrypi.org/debian bullseye/main armhf Packages [313 kB]
Get:5 http://archive.raspberrypi.org/debian bullseye/main arm64 Packages [307 kB]
Get:6 http://security.debian.org/debian-security bullseye-security InRelease [48.4 kB]
Get:7 http://security.debian.org/debian-security bullseye-security/main arm64 Packages [265 kB]
Get:8 http://security.debian.org/debian-security bullseye-security/main armhf Packages [266 kB]
Fetched 1267 kB in 6s (227 kB/s)
Reading package lists...
+ apt-get install -y iptables
Reading package lists...
Building dependency tree...
Reading state information...
iptables is already the newest version (1.8.7-1).
iptables set to manually installed.
0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.
+ sed -i 's@exit 0@@' /etc/rc.local
+ echo '/sbin/iptables -t mangle -I POSTROUTING 1 -o wlan0 -p udp --dport 123 -j TOS --set-tos 0x00'
+ echo 'exit 0'
+ '[' yes == yes ']'
+ unpack filesystem/usr/local/bin /usr/local/bin root
+ from=filesystem/usr/local/bin
+ to=/usr/local/bin
+ owner=
+ '[' 3 -gt 2 ']'
+ owner=root
+ mkdir -p /tmp/unpack/
+ cp -v -r --preserve=mode,timestamps filesystem/usr/local/bin/. /tmp/unpack/
'filesystem/usr/local/bin/./pwrsave' -> '/tmp/unpack/./pwrsave'
'filesystem/usr/local/bin/./pwrsave-udev' -> '/tmp/unpack/./pwrsave-udev'
+ '[' -n root ']'
+ chown -hR root:root /tmp/unpack/
+ cp -v -r --preserve=mode,ownership,timestamps /tmp/unpack/. /usr/local/bin
'/tmp/unpack/./pwrsave' -> '/usr/local/bin/./pwrsave'
'/tmp/unpack/./pwrsave-udev' -> '/usr/local/bin/./pwrsave-udev'
+ rm -r /tmp/unpack
+ '[' udev == rclocal ']'
+ '[' udev == service ']'
+ '[' udev == udev ']'
+ echo_green 'Installing WiFi Power Management udev rule ...'
+ echo -e -n '\e[92m'
[92m+ echo Installing WiFi Power Management udev rule ...
Installing WiFi Power Management udev rule ...
+ echo -e -n '\e[0m'
[0m+ unpack filesystem/etc/udev/rules.d /etc/udev/rules.d root
+ from=filesystem/etc/udev/rules.d
+ to=/etc/udev/rules.d
+ owner=
+ '[' 3 -gt 2 ']'
+ owner=root
+ mkdir -p /tmp/unpack/
+ cp -v -r --preserve=mode,timestamps filesystem/etc/udev/rules.d/. /tmp/unpack/
'filesystem/etc/udev/rules.d/./070-wifi-powersave.rules' -> '/tmp/unpack/./070-wifi-powersave.rules'
+ '[' -n root ']'
+ chown -hR root:root /tmp/unpack/
+ cp -v -r --preserve=mode,ownership,timestamps /tmp/unpack/. /etc/udev/rules.d
'/tmp/unpack/./070-wifi-powersave.rules' -> '/etc/udev/rules.d/./070-wifi-powersave.rules'
+ rm -r /tmp/unpack
+ '[' udev '!=' udev ']'
+ rm -f /usr/local/bin/pwrsave
+ '[' -d custompios_export ']'
+ rm chroot_script
+ '[' -d filesystem ']'
+ rm -rfv filesystem
removed 'filesystem/usr/local/bin/pwrsave-udev'
removed 'filesystem/usr/local/bin/pwrsave'
removed directory 'filesystem/usr/local/bin'
removed directory 'filesystem/usr/local'
removed directory 'filesystem/usr'
removed 'filesystem/etc/systemd/system/disable-wifi-pwr-mgmt.service'
removed directory 'filesystem/etc/systemd/system'
removed directory 'filesystem/etc/systemd'
removed 'filesystem/etc/udev/rules.d/070-wifi-powersave.rules'
removed directory 'filesystem/etc/udev/rules.d'
removed directory 'filesystem/etc/udev'
removed directory 'filesystem/etc'
removed 'filesystem/boot/custompios-wpa-supplicant.txt'
removed directory 'filesystem/boot'
removed directory 'filesystem'
+ execute_chroot_script /home/debian/pistompOS/pistompOS/src/modules/req_preinstall /home/debian/pistompOS/pistompOS/src/modules/req_preinstall/start_chroot_script
+ '[' -f /.dockerenv ']'
+ '[' -d /home/debian/pistompOS/pistompOS/src/modules/req_preinstall/filesystem ']'
++ uname -m
+ '[' aarch64 '!=' armv7l ']'
+ '[' arm64 == armv7l ']'
+ '[' arm64 == aarch64 ']'
+ '[' arm64 == arm64 ']'
+ grep -q gentoo /etc/os-release
++ which qemu-aarch64-static
+ cp /usr/bin/qemu-aarch64-static usr/bin/qemu-aarch64-static
+ cp /home/debian/pistompOS/pistompOS/src/modules/req_preinstall/start_chroot_script chroot_script
+ chmod 755 chroot_script
+ cp /home/debian/pistompOS/src/common.sh common.sh
+ chmod 755 common.sh
++ uname -m
+ '[' aarch64 '!=' armv7l ']'
++ uname -m
+ '[' aarch64 '!=' aarch64 ']'
+ '[' arm64 == armv7l ']'
+ echo 'Building on ARM device a armv7l/aarch64/arm64 system, not using qemu'
Building on ARM device a armv7l/aarch64/arm64 system, not using qemu
+ chroot . /bin/bash /chroot_script
+ export LC_ALL=C
+ LC_ALL=C
+ [[ '' != \n\o\n\i\n\t\e\r\a\c\t\i\v\e ]]
+ export DEBIAN_FRONTEND=noninteractive
+ DEBIAN_FRONTEND=noninteractive
+ source /common.sh
+ install_cleanup_trap
+ set -e
+ trap cleanup SIGINT SIGTERM
+ apt update

WARNING: apt does not have a stable CLI interface. Use with caution in scripts.

Hit:1 http://deb.debian.org/debian bullseye InRelease
Hit:2 http://deb.debian.org/debian bullseye-updates InRelease
Hit:3 http://archive.raspberrypi.org/debian bullseye InRelease
Hit:4 http://security.debian.org/debian-security bullseye-security InRelease
Reading package lists...
Building dependency tree...
Reading state information...
All packages are up to date.
+ echo_green 'Installing pi-Stomp Dependencies ...'
+ echo -e -n '\e[92m'
[92m+ echo Installing pi-Stomp Dependencies ...
Installing pi-Stomp Dependencies ...
+ echo -e -n '\e[0m'
[0m+ sudo apt install -y
sudo: unable to resolve host debian: Name or service not known

WARNING: apt does not have a stable CLI interface. Use with caution in scripts.

Reading package lists...
Building dependency tree...
Reading state information...
0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.
+ echo_green 'Installing Python Packages'
+ echo -e -n '\e[92m'
[92m+ echo Installing Python Packages
Installing Python Packages
+ echo -e -n '\e[0m'
[0m+ sudo /bin/pip3 install -v ''
sudo: unable to resolve host debian: Name or service not known
sudo: /bin/pip3: command not found
++++ echo_red 'build failed, unmounting image...'
++++ echo -e -n '\e[91m'
[91m++++ echo build failed, unmounting image...
build failed, unmounting image...
++++ echo -e -n '\e[0m'
[0m++++ cd /home/debian/pistompOS/pistompOS/src
++++ unmount_image /home/debian/pistompOS/pistompOS/src/workspace/mount force
++++ mount_path=/home/debian/pistompOS/pistompOS/src/workspace/mount
++++ force=
++++ '[' 2 -gt 1 ']'
++++ force=force
++++ sync
++++ '[' -n force ']'
+++++ sudo lsof -t /home/debian/pistompOS/pistompOS/src/workspace/mount
+++++ sudo mount
+++++ grep /home/debian/pistompOS/pistompOS/src/workspace/mount
+++++ awk -F ' on ' '{print $2}'
+++++ awk '{print $1}'
+++++ sort -r
++++ for m in $(sudo mount | grep $mount_path | awk -F " on " '{print $2}' | awk '{print $1}' | sort -r)
++++ echo_green 'Unmounting /home/debian/pistompOS/pistompOS/src/workspace/mount/var/cache/apt...'
++++ echo -e -n '\e[92m'
[92m++++ echo Unmounting /home/debian/pistompOS/pistompOS/src/workspace/mount/var/cache/apt...
Unmounting /home/debian/pistompOS/pistompOS/src/workspace/mount/var/cache/apt...
++++ echo -e -n '\e[0m'
[0m++++ sudo umount /home/debian/pistompOS/pistompOS/src/workspace/mount/var/cache/apt
++++ for m in $(sudo mount | grep $mount_path | awk -F " on " '{print $2}' | awk '{print $1}' | sort -r)
++++ echo_green 'Unmounting /home/debian/pistompOS/pistompOS/src/workspace/mount/proc...'
++++ echo -e -n '\e[92m'
[92m++++ echo Unmounting /home/debian/pistompOS/pistompOS/src/workspace/mount/proc...
Unmounting /home/debian/pistompOS/pistompOS/src/workspace/mount/proc...
++++ echo -e -n '\e[0m'
[0m++++ sudo umount /home/debian/pistompOS/pistompOS/src/workspace/mount/proc
++++ for m in $(sudo mount | grep $mount_path | awk -F " on " '{print $2}' | awk '{print $1}' | sort -r)
++++ echo_green 'Unmounting /home/debian/pistompOS/pistompOS/src/workspace/mount/dev/pts...'
++++ echo -e -n '\e[92m'
[92m++++ echo Unmounting /home/debian/pistompOS/pistompOS/src/workspace/mount/dev/pts...
Unmounting /home/debian/pistompOS/pistompOS/src/workspace/mount/dev/pts...
++++ echo -e -n '\e[0m'
[0m++++ sudo umount /home/debian/pistompOS/pistompOS/src/workspace/mount/dev/pts
++++ for m in $(sudo mount | grep $mount_path | awk -F " on " '{print $2}' | awk '{print $1}' | sort -r)
++++ echo_green 'Unmounting /home/debian/pistompOS/pistompOS/src/workspace/mount/dev...'
++++ echo -e -n '\e[92m'
[92m++++ echo Unmounting /home/debian/pistompOS/pistompOS/src/workspace/mount/dev...
Unmounting /home/debian/pistompOS/pistompOS/src/workspace/mount/dev...
++++ echo -e -n '\e[0m'
[0m++++ sudo umount /home/debian/pistompOS/pistompOS/src/workspace/mount/dev
++++ for m in $(sudo mount | grep $mount_path | awk -F " on " '{print $2}' | awk '{print $1}' | sort -r)
++++ echo_green 'Unmounting /home/debian/pistompOS/pistompOS/src/workspace/mount/boot...'
++++ echo -e -n '\e[92m'
[92m++++ echo Unmounting /home/debian/pistompOS/pistompOS/src/workspace/mount/boot...
Unmounting /home/debian/pistompOS/pistompOS/src/workspace/mount/boot...
++++ echo -e -n '\e[0m'
[0m++++ sudo umount /home/debian/pistompOS/pistompOS/src/workspace/mount/boot
++++ for m in $(sudo mount | grep $mount_path | awk -F " on " '{print $2}' | awk '{print $1}' | sort -r)
++++ echo_green 'Unmounting /home/debian/pistompOS/pistompOS/src/workspace/mount...'
++++ echo -e -n '\e[92m'
[92m++++ echo Unmounting /home/debian/pistompOS/pistompOS/src/workspace/mount...
Unmounting /home/debian/pistompOS/pistompOS/src/workspace/mount...
++++ echo -e -n '\e[0m'
[0m++++ sudo umount /home/debian/pistompOS/pistompOS/src/workspace/mount
++++ echo_red -e '\nBUILD FAILED!\n'
++++ echo -e -n '\e[91m'
[91m++++ echo -e '\nBUILD' 'FAILED!\n'

BUILD FAILED!

++++ echo -e -n '\e[0m'
[0m